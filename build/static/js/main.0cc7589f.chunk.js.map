{"version":3,"sources":["components/section/viz/LineChart.js","components/section/viz/PolarPlot.js","components/section/Section.js","App.js","serviceWorker.js","index.js"],"names":["LineChart","props","state","vizCreated","currentState","updateFunc","createViz","bind","vizRef","React","createRef","data","margin","width","window","innerWidth","innerHeight","Math","min","height","grandDaddy","select","svg","append","attr","x","scaleTime","domain","extent","d","i","date","range","nice","y","scaleLinear","level","totalLength","minDate","xDays","map","ceil","getTime","strokeWidth","call","axisBottom","ticks","tickSize","tickFormat","selectAll","each","this","transition","duration","ease","easeCubicOut","axisRight","style","easeCubic","tickPadding","setState","to","from","regLineLength","yReg","newText","current","querySelector","classList","add","increment","target","dataLine","datum","line","node","getTotalLength","content","params","regLine","regLineLabel","length","raise","text","currentSpan","contains","cos","PI","prevText","remove","decrement","dataLineLength","setTimeout","IntersectionObserver","entries","observer","isIntersecting","resizeTimer","addEventListener","clearTimeout","rootMargin","threshold","observe","vizScrollObserver","forEach","entry","index","Number","dataset","document","querySelectorAll","el","id","className","ref","data-index","_","key","chunk","des","Component","PolarPlot","radius","innerRadius","a","r","max","xDaysParsed","floor","defs","gradient","polarToCartesian","centerX","centerY","angleInDegrees","angleInRadians","sin","describeArc","startAngle","endAngle","start","end","largeArcFlag","join","rAxis","aAxis","enter","slice","Array","lineRadial","angle","curve","curveBasis","filter","easeCubicIn","on","newTotalLength","shell","delay","Section","renderSwitch","sectionRef","vizContent","animationObserver","header","para","segment","type","styles","vizs","mainContent","meta","name","links","link","endNote","App","csv","then","timeParse","body","background","column","href","viz","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0cc7589f.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './LineChart.scss';\nimport { select,\n  scaleLinear, scaleTime,\n  extent,\n  min,\n  axisBottom, axisRight,\n  line,\n  easeCubic,\n  easeCubicOut\n } from 'd3';\n\nclass LineChart extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      vizCreated: false,\n      currentState: -1,\n      updateFunc: null\n    }\n    this.createViz = this.createViz.bind(this)\n    this.vizRef = React.createRef()\n  }\n  createViz(data) {\n    let margin = {\n      top: 20,\n      right: 60,\n      bottom: 40,\n      left: 0},\n      width = window.innerWidth/window.innerHeight > 1.2 ?\n        (window.innerWidth > 900 ?\n          Math.min(window.innerWidth*0.8 - 320, 1200)\n          : Math.min(window.innerWidth*0.8 - 180, 1200))\n        : Math.min(window.innerWidth*0.8, 1200),\n      height = window.innerWidth/window.innerHeight > 1.2 ?\n        Math.min(window.innerHeight*0.8, width, 1000)\n        : Math.min(window.innerHeight*0.9 - 300, width, 1000),\n      innerWidth = width - margin.left - margin.right,\n      innerHeight = height - margin.top - margin.bottom,\n      grandDaddy = select('#line-chart'),\n      svg = grandDaddy.select('.viz-svg-wrap')\n      .append('svg')\n        .attr(\"preserveAspectRatio\", \"xMidYMid meet\")\n        .attr(\"viewBox\", '0 0 ' + width + ' ' + height)\n        .attr('class', 'viz'),\n      x = scaleTime()\n      .domain(extent(data, (d, i) => {return d.date}))\n      .range([0, innerWidth])\n      .nice(),\n      y = scaleLinear()\n      .domain(extent(data, (d, i) => {return d.level}))\n      .range([innerHeight, 0])\n      .nice(),\n      totalLength = null,\n      minDate = min(data, function(d) {return d.date}),\n      xDays = data.map(d => Math.ceil((d.date.getTime() - minDate.getTime())/(1000*60*60*24))),\n      strokeWidth = height/400\n\n    grandDaddy.select('.viz-divider').attr('class', 'viz-divider on')\n\n    // Grid lines\n    svg.append('g')\n      .attr('class', 'y grid')\n      .attr('transform', 'translate(' + margin.left + ', ' + height + ')')\n      .call(axisBottom(x)\n          .ticks(5)\n          .tickSize(-height)\n          .tickFormat('')\n      )\n    grandDaddy.selectAll('.y.grid>.tick').each(function(d, i) {\n      select(this).attr(\"stroke-dasharray\", height + \" \" + height)\n        .attr(\"stroke-dashoffset\", height)\n        .attr('stroke-width', strokeWidth/2)\n        .transition()\n          .duration(800)\n          .ease(easeCubicOut)\n          .attr('stroke-dashoffset', function() {\n            if (i%2 === 0) {\n              return 0\n            } else {\n              return 2*height\n            }\n          })\n    })\n    svg.append('g')\n      .attr('class', 'x grid')\n      .attr('transform', 'translate(' + margin.left + ', ' + margin.top + ')')\n      .call(axisRight(y)\n          .ticks(5)\n          .tickSize(width)\n          .tickFormat('')\n      )\n    grandDaddy.selectAll('.x.grid>.tick').each(function(d, i) {\n      select(this).attr(\"stroke-dasharray\", width + \" \" + width)\n        .attr(\"stroke-dashoffset\", width)\n        .attr('stroke-width', strokeWidth/2)\n        .transition()\n          .duration(800)\n          .ease(easeCubicOut)\n          .attr('stroke-dashoffset', function() {\n            if (i%2 === 0) {\n              return 0\n            } else {\n              return 2*width\n            }\n          })\n    })\n\n    // Axes\n    svg.append('g')\n      .attr('class', 'x axis')\n      .attr('transform', 'translate(' + margin.left + ', ' + (innerHeight + margin.top) + ')')\n      .style(\"opacity\", 0)\n      .transition()\n        .duration(800)\n        .ease(easeCubic)\n        .style('opacity', 1)\n      .call(axisBottom(x)\n        .ticks(5)\n        .tickSize(0)\n        .tickPadding(24))\n    svg.append('g')\n      .attr('class', 'y axis')\n      .attr('transform', 'translate(' + (innerWidth + margin.left) + ', ' + margin.top + ')')\n      .style(\"opacity\", 0)\n      .transition()\n        .duration(800)\n        .ease(easeCubic)\n        .style('opacity', 1)\n      .call(axisRight(y)\n        .ticks(5)\n        .tickSize(0)\n        .tickPadding(32))\n    svg.append('line')\n      .attr('class', 'bottom-axis')\n      .attr(\"x1\", 0)\n      .attr(\"y1\", height - margin.bottom)\n      .attr(\"x2\", width)\n      .attr(\"y2\", height - margin.bottom)\n      .style(\"opacity\", 0)\n      .attr('stroke-width', strokeWidth)\n      .transition()\n        .duration(800)\n        .ease(easeCubicOut)\n        .style('opacity', 1)\n\n    this.setState({\n      vizCreated: true,\n      updateFunc: (to, from) => {\n        let regLineLength = null,\n          yReg = null,\n          newText = to !== -1 ? this.vizRef.current.querySelector('.viz-des-text:nth-child(' + (to + 1) + ')') : null\n        if (to > from) {\n          if (newText) {\n            newText.classList.add('on')\n          }\n          let increment = (target) => {\n            switch(target) {\n              case 0: // Initial\n                // Main data line\n                let dataLine = svg.append('path')\n                  .datum(data)\n                  .attr('class', 'data-line')\n                  .attr('d', line()\n                    .x(function(d) { return x(d.date) + margin.left })\n                    .y(function(d) { return y(d.level) + margin.top })\n                  )\n                  .attr('stroke-width', strokeWidth)\n\n                // Animate data line\n                totalLength = dataLine.node().getTotalLength()\n                dataLine.attr(\"stroke-dasharray\", totalLength + \" \" + totalLength)\n                  .attr(\"stroke-dashoffset\", totalLength)\n                  .transition()\n                    .duration(800)\n                    .ease(easeCubic)\n                    .attr('stroke-dashoffset', 0)\n                break\n              case 1: // Linear\n                yReg = xDays.map(d => this.props.content[1].params[0] + this.props.content[1].params[1]*d)\n                let regLine = svg.append('path')\n                  .datum(data)\n                  .attr('class', 'reg-line')\n                  .attr('d', line()\n                    .x(function(d) { return x(d.date) + margin.left })\n                    .y(function(d, i) {return y(yReg[i]) + margin.top })\n                  )\n                  .attr('stroke-width', strokeWidth),\n                regLineLabel = svg.append('g')\n                  .attr('class', 'reg-line-label')\n                  .attr('transform',\n                    'translate('\n                    + (width > 540 ?\n                      (x(data[Math.ceil(data.length*0.52)]['date']) + margin.left + 64)\n                      : (x(data[Math.ceil(data.length*0.36)]['date']) + margin.left + 20))\n                    + ', '\n                    + (width > 540 ?\n                      (y(yReg[Math.ceil(yReg.length*0.52)]) + margin.top + 20)\n                      : (y(yReg[Math.ceil(yReg.length*0.36)]) + margin.top + 20))\n                    + ')'\n                  )\n                grandDaddy.select('.bottom-axis').raise()\n                regLineLabel.style('opacity', 0)\n                  .transition()\n                    .duration(720)\n                    .ease(easeCubic)\n                    .style('opacity', 1)\n                regLineLabel.append('rect')\n                  .attr('class', 'reg-line-label-rect linear')\n                  .attr('stroke-width', strokeWidth/2)\n                  .attr('rx', 4)\n                  .attr('ry', 4)\n                  .style('width', '4.7em')\n                let regLineLabelText = regLineLabel.append('text')\n                    .attr('class', 'reg-line-label-text')\n                regLineLabelText.append('tspan')\n                    .attr('class', 'linear span')\n                    .text('y = αx')\n                regLineLength = regLine.node().getTotalLength()\n                regLine.attr(\"stroke-dasharray\", regLineLength + \" \" + regLineLength)\n                  .attr(\"stroke-dashoffset\", regLineLength)\n                  .transition()\n                    .duration(800)\n                    .ease(easeCubicOut)\n                    .attr('stroke-dashoffset', 0)\n                grandDaddy.select('.data-line').attr('class', 'data-line faded')\n                grandDaddy.selectAll('.reg-line-label-text>tspan:not(.linear)')\n                  .each(function(d) {\n                    let currentSpan = select(this)\n                    if (!currentSpan.node().classList.contains('off')) {\n                      currentSpan.node().classList.add('off')\n                    }\n                  })\n                break\n              case 2: // Quadratic\n                yReg = xDays.map(d => this.props.content[2].params[0] + this.props.content[2].params[1]*d + this.props.content[2].params[2]*d**2)\n                grandDaddy.select('.reg-line').transition()\n                  .duration(800)\n                  .ease(easeCubicOut)\n                  .attr('d', line()\n                    .x(function(d) { return x(d.date) + margin.left })\n                    .y(function(d, i) {return y(yReg[i]) + margin.top })\n                  )\n                regLineLength = grandDaddy.select('.reg-line').node().getTotalLength()\n                grandDaddy.select('.reg-line').attr(\"stroke-dasharray\", 0)\n                  .attr('stroke-dashoffset', 0)\n                grandDaddy.select('.reg-line-label-rect')\n                  .attr('class', 'reg-line-label-rect quadratic')\n                  .transition()\n                    .duration(600)\n                    .ease(easeCubicOut)\n                    .style('width', '7.8em')\n                grandDaddy.select('.reg-line-label-text').append('tspan')\n                  .attr('class', 'quadratic span')\n                  .text(' + βx\\u00b2')\n                  .style('opacity', 0)\n                    .transition()\n                      .duration(800)\n                      .ease(easeCubic)\n                      .style('opacity', 1)\n                grandDaddy.selectAll('.reg-line-label-text>tspan:not(.quadratic)')\n                  .each(function(d) {\n                    let currentSpan = select(this)\n                    if (!currentSpan.node().classList.contains('off')) {\n                      currentSpan.node().classList.add('off')\n                    }\n                  })\n                break\n              case 3: // Cosine\n                yReg = xDays.map(d => this.props.content[3].params[0]\n                  + this.props.content[3].params[1]*d\n                  + this.props.content[3].params[2]*d**2\n                  + this.props.content[3].params[3]*Math.cos(2*Math.PI*d/365.25 + this.props.content[3].params[4])\n                )\n                grandDaddy.select('.reg-line').attr(\"stroke-dasharray\", regLineLength + \" \" + regLineLength)\n                  .transition()\n                    .duration(800)\n                    .ease(easeCubicOut)\n                    .attr('d', line()\n                      .x(function(d) { return x(d.date) + margin.left })\n                      .y(function(d, i) {return y(yReg[i]) + margin.top })\n                  )\n                regLineLength = grandDaddy.select('.reg-line').node().getTotalLength()\n                grandDaddy.select('.reg-line').attr(\"stroke-dasharray\", 0)\n                  .attr('stroke-dashoffset', 0)\n                grandDaddy.select('.reg-line-label-rect')\n                  .attr('class', 'reg-line-label-rect cosine')\n                  .transition()\n                    .duration(600)\n                    .ease(easeCubicOut)\n                    .style('width', '15.8em')\n                grandDaddy.select('.reg-line-label-text').append('tspan')\n                  .attr('class', 'cosine span')\n                  .text(' + cos(2πt + φ)')\n                  .style('opacity', 0)\n                    .transition()\n                      .duration(800)\n                      .ease(easeCubic)\n                      .style('opacity', 1)\n                grandDaddy.selectAll('.reg-line-label-text>tspan:not(.cosine)')\n                  .each(function(d) {\n                    let currentSpan = select(this)\n                    if (!currentSpan.node().classList.contains('off')) {\n                      currentSpan.node().classList.add('off')\n                    }\n                  })\n                break\n              default:\n            }\n          }\n          for (let i = from; i < to; i++) {\n            let prevText = this.vizRef.current.querySelector('.viz-des-text:nth-child(' + (i + 1) + ')')\n            increment(i + 1)\n            if (prevText) {\n              prevText.classList.remove('on')\n              prevText.classList.remove('on-reverse')\n            }\n          }\n        } else if (to < from) {\n          if (newText) {\n            newText.classList.add('on-reverse')\n          }\n          let decrement = (target) => {\n            switch(target) {\n              case -1:\n                let dataLineLength = grandDaddy.select('.data-line').node().getTotalLength()\n                grandDaddy.select('.data-line').attr('stroke-dashoffset', 0)\n                  .transition()\n                    .duration(800)\n                    .ease(easeCubicOut)\n                    .attr('stroke-dashoffset', -dataLineLength)\n                    .remove()\n                break\n              case 0: // Initial\n                regLineLength = grandDaddy.select('.reg-line').node().getTotalLength()\n                grandDaddy.select('.reg-line').attr('stroke-dashoffset', 0)\n                  .transition()\n                    .duration(800)\n                    .ease(easeCubicOut)\n                    .attr('stroke-dashoffset', -regLineLength)\n                    .remove()\n                grandDaddy.select('.data-line').attr('class', 'data-line')\n                grandDaddy.select('.reg-line-label').style('opacity', 1)\n                  .transition()\n                    .duration(800)\n                    .ease(easeCubicOut)\n                    .style('opacity', 0)\n                    .remove()\n                break\n              case 1: // Linear\n                yReg = xDays.map(d => this.props.content[1].params[0] + this.props.content[1].params[1]*d)\n                grandDaddy.select('.reg-line').transition()\n                  .duration(800)\n                  .ease(easeCubicOut)\n                  .attr('d', line()\n                    .x(function(d) { return x(d.date) + margin.left })\n                    .y(function(d, i) {return y(yReg[i]) + margin.top })\n                )\n                regLineLength = grandDaddy.select('.reg-line').node().getTotalLength()\n                grandDaddy.select('.reg-line').attr(\"stroke-dasharray\", regLineLength + \" \" + regLineLength)\n                grandDaddy.select('.reg-line-label-text>.quadratic.span').style('opacity', 1)\n                  .transition()\n                    .duration(320)\n                    .ease(easeCubicOut)\n                    .style('opacity', 0)\n                    .remove()\n                grandDaddy.select('.reg-line-label-rect').attr('class', 'reg-line-label-rect linear')\n                  .transition()\n                    .duration(600)\n                    .ease(easeCubicOut)\n                    .style('width', '4.7em')\n                setTimeout(() => {\n                  grandDaddy.select('.reg-line-label-rect').attr('class', 'reg-line-label-rect linear')\n                })\n                grandDaddy.select('.reg-line-label-text>.linear.span').attr('class', 'linear span on')\n                break\n              case 2: // Quadratic\n                yReg = xDays.map(d => this.props.content[2].params[0]\n                  + this.props.content[2].params[1]*d\n                  + this.props.content[2].params[2]*d**2)\n                grandDaddy.select('.reg-line').transition()\n                  .duration(800)\n                  .ease(easeCubicOut)\n                  .attr('d', line()\n                    .x(function(d) { return x(d.date) + margin.left })\n                    .y(function(d, i) {return y(yReg[i]) + margin.top })\n                )\n                regLineLength = grandDaddy.select('.reg-line').node().getTotalLength()\n                grandDaddy.select('.reg-line').attr(\"stroke-dasharray\", regLineLength + \" \" + regLineLength)\n                grandDaddy.select('.reg-line-label-text>.cosine.span').style('opacity', 1)\n                  .transition()\n                    .duration(320)\n                    .ease(easeCubicOut)\n                    .style('opacity', 0)\n                    .remove()\n                grandDaddy.select('.reg-line-label-rect').attr('class', 'reg-line-label-rect quadratic')\n                  .transition()\n                    .duration(600)\n                    .ease(easeCubicOut)\n                    .style('width', '7.8em')\n                setTimeout(() => {\n                  grandDaddy.select('.reg-line-label-rect').attr('class', 'reg-line-label-rect quadratic')\n                })\n                grandDaddy.select('.reg-line-label-text>.quadratic.span').attr('class', 'quadratic span on')\n                break\n              default:\n            }\n          }\n          for (let i = from; i > to; i--) {\n            let prevText = this.vizRef.current.querySelector('.viz-des-text:nth-child(' + (i + 1) + ')')\n            decrement(i - 1)\n            if (prevText) {\n              prevText.classList.remove('on')\n              prevText.classList.remove('on-reverse')\n            }\n          }\n        }\n        this.setState({\n          currentState: to\n        })\n      }\n    })\n  }\n  componentDidMount() {\n    let vizObserver = new IntersectionObserver(\n      (entries, observer) => {\n        if (entries[0].isIntersecting && !this.state.vizCreated) {\n          this.setState({\n            vizCreated: true\n          }, () => {\n            this.createViz(this.props.data)\n            let resizeTimer\n            window.addEventListener('resize', () => {\n              clearTimeout(resizeTimer)\n              resizeTimer = setTimeout(() => {\n                select('#line-chart .viz').remove()\n                this.createViz(this.props.data)\n                this.state.updateFunc(this.state.currentState, -1)\n              }, 400)\n            })\n          })\n        }\n      },\n      {\n        rootMargin: '-50%',\n        threshold: 0\n      })\n    vizObserver.observe(this.vizRef.current)\n\n    let vizScrollObserver = new IntersectionObserver(\n      (entries, observer) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            let index = Number(entry.target.dataset.index)\n            if (index > -1) {\n              if (!this.state.vizCreated) {\n                this.setState({\n                  vizCreated: true\n                }, () => {\n                  this.createViz(this.props.data)\n                  let resizeTimer\n                  window.addEventListener('resize', () => {\n                    clearTimeout(resizeTimer)\n                    resizeTimer = setTimeout(() => {\n                      select('#line-chart .viz').remove()\n                      this.createViz(this.props.data)\n                      this.state.updateFunc(this.state.currentState, -1)\n                    }, 400)\n                  })\n                })\n              }\n              this.state.updateFunc(index, this.state.currentState)\n            } else if (this.state.vizCreated) {\n              this.state.updateFunc(index, this.state.currentState)\n            }\n          }\n        })\n      },\n      {\n        threshold: 0\n      }\n    )\n    document.querySelectorAll('#line-chart .viz-scroll-anchor').forEach(el => {\n      vizScrollObserver.observe(el)\n    })\n  }\n  render() {\n    return (\n      <div id=\"line-chart\" className=\"viz-outer-wrap\" ref={this.vizRef}>\n        <div className=\"viz-scroll-box\">\n          <div className=\"viz-scroll-anchor\" data-index=\"-1\"></div>\n          {this.props.content.map((_, index) => {\n            return (\n              <div className=\"viz-scroll-anchor\" data-index={index} key={index}></div>\n            )\n          })}\n          <div className=\"viz-scroll-dummy-anchor\"></div>\n        </div>\n        <div className=\"viz-wrap\">\n          <div className=\"viz-svg-outer-wrap\">\n            <div className=\"viz-svg-wrap\"></div>\n          </div>\n          <div className=\"viz-des-wrap\">\n            {this.props.content.map((chunk, index) => {\n              return (\n                <p className=\"viz-des-text\" key={index}>{chunk.des}</p>\n              )\n            })}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default LineChart;\n","import React, { Component } from 'react';\nimport './PolarPlot.scss';\nimport { select,\n  scaleLinear, extent,\n  max,\n  min,\n  lineRadial,\n  curveBasis,\n  easeCubic,\n  easeCubicIn,\n  easeCubicOut\n } from 'd3';\n\nclass PolarPlot extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      vizCreated: false,\n      currentState: -1,\n      updateFunc: null\n    }\n    this.createViz = this.createViz.bind(this)\n    this.vizRef = React.createRef()\n  }\n  createViz(data) {\n    let margin = 40,\n      radius = window.innerWidth/window.innerHeight > 1.2 ?\n        (window.innerWidth > 900 ?\n          Math.min(window.innerWidth*0.8 - 320, window.innerHeight*0.9, 1000)/2\n          : Math.min(window.innerWidth*0.8 - 180, window.innerHeight*0.9, 1000)/2)\n        : Math.min(window.innerWidth*0.8, window.innerHeight*0.9 - 300, 1000)/2,\n      innerRadius = radius - margin,\n      grandDaddy = select('#polar-plot'),\n      svg = grandDaddy.select('.viz-svg-wrap')\n      .append('svg')\n        .attr(\"preserveAspectRatio\", \"xMidYMid meet\")\n        .attr(\"viewBox\", '0 0 ' + radius*2 + ' ' + radius*2)\n        .attr('class', 'viz'),\n      a = scaleLinear()\n      .domain([0, 365.25])\n      .range([0, 2*Math.PI]),\n      r = scaleLinear()\n      .domain([0, max(data, (d, i) => {return d.level})])\n      .range([0, innerRadius])\n      .nice(),\n      totalLength = null,\n      minDate = min(data, function(d) {return d.date}),\n      xDays = data.map(d => (d.date.getTime() - minDate.getTime())/(1000*60*60*24)),\n      xDaysParsed = xDays.map(d => Math.floor(d % 365.25)),\n      defs = svg.append('defs'),\n      gradient = defs.append('linearGradient')\n        .attr('id', 'polar-grad')\n        .attr('x1', '30%')\n        .attr('x2', '70%')\n        .attr('y1', '70%')\n        .attr('y2', '30%'),\n      // polarToCartesian & describeArc from wdebeaum, @stackoverflow: https://stackoverflow.com/a/5737245\n      polarToCartesian = function(centerX, centerY, radius, angleInDegrees) {\n        let angleInRadians = (angleInDegrees-90) * Math.PI / 180.0\n        return {\n          x: centerX + (radius * Math.cos(angleInRadians)),\n          y: centerY + (radius * Math.sin(angleInRadians))\n        }\n      },\n      describeArc = function(x, y, radius, startAngle, endAngle){\n        let start = polarToCartesian(x, y, radius, endAngle)\n        let end = polarToCartesian(x, y, radius, startAngle)\n        let largeArcFlag = endAngle - startAngle <= 180 ? \"0\" : \"1\"\n        let d = [\n            'L', start.x, start.y,\n            'A', radius, radius, 0, largeArcFlag, 0, end.x, end.y,\n            'Z'\n        ].join(' ')\n        return d\n      },\n      strokeWidth = radius/200\n\n      grandDaddy.select('.viz-divider').attr('class', 'viz-divider on')\n\n      defs.append('clipPath')\n        .attr('id', 'winter-polar-clip')\n        .append('rect')\n          .attr('x', 0)\n          .attr('y', -1)\n          .attr('width', '100%')\n          .attr('height', '101%')\n          .attr('transform', 'rotate(-180)')\n      defs.append('clipPath')\n        .attr('id', 'summer-polar-clip')\n        .append('rect')\n          .attr('x', 0)\n          .attr('y', 0)\n          .attr('width', '100%')\n          .attr('height', '100%')\n          .attr('transform', 'rotate(0)')\n\n      gradient.append('stop')\n        .attr('offset', '0%')\n        .attr('style', 'stop-color: var(--warm); stop-opacity: 1')\n      gradient.append('stop')\n        .attr('offset', '100%')\n        .attr('style', 'stop-color: var(--cool); stop-opacity: 1')\n\n      let rAxis = svg.append('g')\n        .attr('class', 'r axis')\n        .attr('transform', 'translate(' + radius + ' ' + radius + ')'),\n      aAxis = svg.append('g')\n        .attr('class', 'a axis')\n        .attr('transform', 'translate(' + radius + ' ' + radius + ')')\n\n      rAxis.selectAll('circle')\n        .data([...r.ticks(5), 320, 340, 360, 380])\n        .enter()\n        .append('circle')\n          .attr('class', (d) => {return 'grid-circle' + ((d > 300 && d < 400) ? ' secondary' : '')})\n          .attr('stroke-width', strokeWidth/2)\n          .attr('transform', 'rotate(-90)')\n          .attr('r', r)\n          .attr(\"stroke-dasharray\", (d) => {return 2*Math.PI*r(d) + \" \" + 2*Math.PI*r(d)})\n            .attr(\"stroke-dashoffset\", (d) => {return 2*Math.PI*r(d)})\n            .transition()\n              .duration(800)\n              .ease(easeCubic)\n              .attr('stroke-dashoffset', 0)\n      rAxis.append('circle')\n        .attr('class', 'grid-circle')\n        .attr('stroke-width', strokeWidth/2)\n        .attr('transform', 'rotate(-90)')\n        .attr('r', innerRadius)\n        .attr(\"stroke-dasharray\", 2*Math.PI*innerRadius + \" \" + 2*Math.PI*innerRadius)\n          .attr(\"stroke-dashoffset\", 2*Math.PI*innerRadius)\n          .transition()\n            .duration(800)\n            .ease(easeCubic)\n            .attr('stroke-dashoffset', 0)\n\n      rAxis.selectAll('g')\n        .data([...r.ticks(5).slice(1), 320, 340, 360, 380])\n        .enter()\n        .append('text')\n        .attr('class', (d) => {return 'r tick' + ((d > 300 && d < 400) ? ' secondary' : '')})\n        .attr('transform', function(d) {return 'translate(' + r(d)*Math.cos(-Math.PI/12) + ' ' + r(d)*Math.sin(-Math.PI/12) + ')'})\n        .attr('text-anchor', 'middle')\n        .attr('alignment-baseline', 'central')\n        .text(function (d) {return d})\n\n      aAxis.selectAll('line')\n        .data(Array(6))\n        .enter()\n        .append('line')\n          .attr('class', 'grid-line')\n          .attr('stroke-width', strokeWidth/2)\n          .attr('x1', 0)\n          .attr('x2', 0)\n          .attr('y1', -innerRadius)\n          .attr('y2', innerRadius)\n          .attr('transform', function(_, i) {return 'rotate(' + (30*i) + ')'})\n          .attr(\"stroke-dasharray\", 2*innerRadius + \" \" + 2*innerRadius)\n            .attr(\"stroke-dashoffset\", 2*innerRadius)\n            .transition()\n              .duration(800)\n              .ease(easeCubic)\n              .attr('stroke-dashoffset', (_, i) => {\n                if (i%2 === 0) {\n                  return 0\n                } else {\n                  return 4*innerRadius\n                }\n              })\n\n      aAxis.selectAll('text')\n        .data(['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'])\n        .enter()\n        .append('text')\n          .attr('class', 'a tick')\n          .attr('text-anchor', 'middle')\n          .attr('alignment-baseline', 'central')\n          .attr('dx', function(_, i) {return (innerRadius + 24)*Math.cos((i/6 - 1/2)*Math.PI)})\n          .attr('dy', function(_, i) {return (innerRadius + 24)*Math.sin((i/6 - 1/2)*Math.PI)})\n          .text(function (d) {return d})\n\n    this.setState({\n      vizCreated: true,\n      updateFunc: (to, from) => {\n        let newText = to !== -1 ? this.vizRef.current.querySelector('.viz-des-text:nth-child(' + (to + 1) + ')') : null\n        if (to > from) {\n          if (newText) {\n            newText.classList.add('on')\n          }\n          let increment = (target) => {\n            switch(target) {\n              case 0: // One\n                // Main data line\n                svg.append('path').attr('class', 'data-line')\n                  .datum(data.slice(0, 37))\n                  .attr('transform', 'translate(' + radius + ' ' + radius + ')')\n                  .attr('stroke', 'url(#polar-grad)')\n                  .attr('stroke-width', strokeWidth)\n                  .attr('d', lineRadial()\n                    .angle(function(_, index) { return a(xDaysParsed[index]) })\n                    .radius(function(d) { return r(d.level) })\n                    .curve(curveBasis)\n                  )\n                totalLength = grandDaddy.select('.data-line').node().getTotalLength()\n                grandDaddy.select('.data-line').attr(\"stroke-dasharray\", totalLength + \" \" + totalLength)\n                  .attr(\"stroke-dashoffset\", totalLength)\n                  .transition()\n                    .duration(800)\n                    .ease(easeCubic)\n                    .attr('stroke-dashoffset', 0)\n                break\n              case 1: // All\n                r.domain(extent(data, data => {return data.level})).nice()\n                // Remove unneeded circles and ticks\n                grandDaddy.selectAll('.grid-circle').filter((_, i) => {return i < 4})\n                  .attr('class', 'grid-circle off')\n                  .transition()\n                    .duration(1200)\n                    .ease(easeCubicIn)\n                    .attr('r', 0)\n                grandDaddy.selectAll('.r.tick').filter((_, i) => {return i < 3})\n                  .attr('class', 'r tick off')\n                  .transition()\n                    .duration(1200)\n                    .ease(easeCubicIn)\n                    .attr('transform', 'translate(0 0)')\n                // Move 400 circle and tick\n                grandDaddy.selectAll('.grid-circle:nth-child(5)').transition()\n                  .duration(800)\n                  .ease(easeCubicIn)\n                  .attr('r', r)\n                grandDaddy.selectAll('.r.tick:nth-child(4)')\n                  .transition()\n                    .duration(800)\n                    .ease(easeCubicIn)\n                    .attr('transform', function(d) {return 'translate(' + r(d)*Math.cos(-Math.PI/12) + ' ' + r(d)*Math.sin(-Math.PI/12) + ')'})\n                // Add new circles and ticks\n                grandDaddy.selectAll('.grid-circle.secondary').attr('class', 'grid-circle secondary on').transition()\n                  .duration(800)\n                  .ease(easeCubicIn)\n                  .attr('r', r)\n                grandDaddy.selectAll('.r.tick.secondary').attr('class', 'r tick secondary on').transition()\n                  .duration(800)\n                  .ease(easeCubicIn)\n                  .attr('transform', function(d) {return 'translate(' + r(d)*Math.cos(-Math.PI/12) + ' ' + r(d)*Math.sin(-Math.PI/12) + ')'})\n\n                grandDaddy.select('.data-line')\n                .transition()\n                  .duration(800)\n                  .ease(easeCubicIn)\n                  .attr('d', lineRadial()\n                    .angle(function(_, index) { return a(xDaysParsed[index]) })\n                    .radius(function(d) { return r(d.level) })\n                    .curve(curveBasis))\n                    .on(\"end\", () => {\n                      let dataLine = grandDaddy.select('.data-line')\n                      .datum(data)\n                      .attr('d', lineRadial()\n                        .angle(function(_, index) { return a(xDaysParsed[index]) })\n                        .radius(function(d) { return r(d.level) })\n                        .curve(curveBasis)),\n                      newTotalLength = dataLine.node().getTotalLength()\n                      dataLine.attr(\"stroke-dasharray\", newTotalLength + \" \" + newTotalLength)\n                        .attr(\"stroke-dashoffset\", newTotalLength)\n                        .transition()\n                          .duration(800)\n                          .ease(easeCubicOut)\n                          .attr('stroke-dashoffset', 0)\n                    })\n                break\n              case 2: // Stretches\n                svg.append('path')\n                  .attr('class', 'winter stretch')\n                  .attr('clip-path', 'url(#winter-polar-clip)')\n                  .datum(data.slice(3112, 3126))\n                  .attr('transform', 'translate(' + radius + ' ' + radius + ')')\n                  .attr('stroke-width', strokeWidth/2)\n                  .attr('d', (data) => {\n                    let line = lineRadial()\n                    .angle(function(_, index) { return a(xDaysParsed[index+3112]) })\n                    .radius(function(d) { return r(d.level) })\n                    .curve(curveBasis)\n                    , shell = describeArc(0, 0, innerRadius, 0, 90)\n                    return line(data) + shell}\n                  )\n                svg.append('path')\n                  .attr('class', 'summer stretch')\n                  .attr('clip-path', 'url(#summer-polar-clip)')\n                  .datum(data.slice(3086, 3100))\n                  .attr('transform', 'translate(' + radius + ' ' + radius + ')')\n                  .attr('stroke-width', strokeWidth/2)\n                  .attr('d', (data) => {\n                    let line = lineRadial()\n                    .angle(function(_, index) { return a(xDaysParsed[index+3086]) })\n                    .radius(function(d) { return r(d.level) })\n                    .curve(curveBasis)\n                    , shell = describeArc(0, 0, innerRadius, 180, 270)\n                    return line(data) + shell}\n                  )\n\n                  grandDaddy.select('#winter-polar-clip rect').transition()\n                    .duration(800)\n                    .ease(easeCubic)\n                    .attr('transform', 'rotate(-90)')\n                  grandDaddy.select('#summer-polar-clip rect').transition()\n                    .duration(800)\n                    .ease(easeCubic)\n                    .attr('transform', 'rotate(90)')\n                break\n              default:\n            }\n          }\n          for (let i = from; i < to; i++) {\n            let prevText = this.vizRef.current.querySelector('.viz-des-text:nth-child(' + (i + 1) + ')')\n            increment(i + 1)\n            if (prevText) {\n              prevText.classList.remove('on')\n              prevText.classList.remove('on-reverse')\n            }\n          }\n        } else if (to < from) {\n          if (newText) {\n            newText.classList.add('on-reverse')\n          }\n          let decrement = (target) => {\n            switch(target) {\n              case -1: // Init\n                let dataLine = grandDaddy.select('.data-line')\n                totalLength = dataLine.node().getTotalLength()\n\n                dataLine.attr(\"stroke-dasharray\", totalLength + \" \" + totalLength)\n                  .attr(\"stroke-dashoffset\", 0)\n                  .transition()\n                    .duration(800)\n                    .ease(easeCubic)\n                    .attr('stroke-dashoffset', totalLength)\n                    .remove()\n                break\n              case 0: // One\n                r.domain([0, max(data, (d, i) => {return d.level})]).nice()\n                // Remove unneeded circles and ticks\n                grandDaddy.selectAll('.grid-circle').filter((_, i) => {return i < 4})\n                  .attr('class', 'grid-circle')\n                  .transition()\n                    .duration(800)\n                    .ease(easeCubicIn)\n                    .attr('r', r)\n                grandDaddy.selectAll('.r.tick').filter((_, i) => {return i < 3})\n                  .attr('class', 'r tick')\n                  .transition()\n                    .duration(800)\n                    .ease(easeCubicIn)\n                    .attr('transform', function(d) {return 'translate(' + r(d)*Math.cos(-Math.PI/12) + ' ' + r(d)*Math.sin(-Math.PI/12) + ')'})\n                // Move 400 circle and tick\n                grandDaddy.selectAll('.grid-circle:nth-child(5)').transition()\n                  .duration(800)\n                  .ease(easeCubicIn)\n                  .attr('r', r)\n                grandDaddy.selectAll('.r.tick:nth-child(4)')\n                  .transition()\n                    .duration(800)\n                    .ease(easeCubicIn)\n                    .attr('transform', function(d) {return 'translate(' + r(d)*Math.cos(-Math.PI/12) + ' ' + r(d)*Math.sin(-Math.PI/12) + ')'})\n                // Add new circles and ticks\n                grandDaddy.selectAll('.grid-circle.secondary').attr('class', 'grid-circle secondary').transition()\n                  .duration(800)\n                  .ease(easeCubicIn)\n                  .attr('r', r)\n                grandDaddy.selectAll('.r.tick.secondary').attr('class', 'r tick secondary').transition()\n                  .duration(800)\n                  .ease(easeCubicIn)\n                  .attr('transform', function(d) {return 'translate(' + r(d)*Math.cos(-Math.PI/12) + ' ' + r(d)*Math.sin(-Math.PI/12) + ')'})\n\n                grandDaddy.select('.data-line')\n                .datum(data.slice(0, 37))\n                .transition()\n                  .duration(400)\n                  .ease(easeCubicIn)\n                  .style('opacity', 0)\n                  .on('end', () => {\n                    let dataLine = grandDaddy.select('.data-line')\n                    .datum(data.slice(0, 37))\n                    .style('opacity', 1)\n                    .attr('d', lineRadial()\n                      .angle(function(_, index) { return a(xDaysParsed[index]) })\n                      .radius(function(d) { return r(d.level) })\n                      .curve(curveBasis)),\n                    newTotalLength = dataLine.node().getTotalLength()\n\n                    dataLine.attr(\"stroke-dasharray\", newTotalLength + \" \" + newTotalLength)\n                      .attr(\"stroke-dashoffset\", newTotalLength)\n                      .transition()\n                        .duration(800)\n                        .ease(easeCubic)\n                        .attr('stroke-dashoffset', 0)\n                  })\n                break\n              case 1: // All\n                grandDaddy.select('#winter-polar-clip rect').transition()\n                  .duration(800)\n                  .ease(easeCubic)\n                  .attr('transform', 'rotate(-180)')\n                grandDaddy.select('#summer-polar-clip rect').transition()\n                  .duration(800)\n                  .ease(easeCubic)\n                  .attr('transform', 'rotate(0)')\n\n                grandDaddy.select('.summer.stretch').transition()\n                  .delay(800)\n                  .remove()\n                grandDaddy.select('.winter.stretch').transition()\n                  .delay(800)\n                  .remove()\n                break\n              default:\n            }\n          }\n          for (let i = from; i > to; i--) {\n            let prevText = this.vizRef.current.querySelector('.viz-des-text:nth-child(' + (i + 1) + ')')\n            decrement(i - 1)\n            if (prevText) {\n              prevText.classList.remove('on')\n              prevText.classList.remove('on-reverse')\n            }\n          }\n        }\n        this.setState({\n          currentState: to\n        })\n      }\n    })\n  }\n  componentDidMount() {\n    let vizObserver = new IntersectionObserver(\n      (entries, observer) => {\n        if (entries[0].isIntersecting && !this.state.vizCreated) {\n          this.setState({\n            vizCreated: true\n          }, () => {\n            this.createViz(this.props.data)\n            let resizeTimer\n            window.addEventListener('resize', () => {\n              clearTimeout(resizeTimer)\n              resizeTimer = setTimeout(() => {\n                select('#polar-plot .viz').remove()\n                this.createViz(this.props.data)\n                this.state.updateFunc(this.state.currentState, -1)\n              }, 400)\n            })\n          })\n        }\n      },\n      {\n        rootMargin: '-50%',\n        threshold: 0\n      })\n    vizObserver.observe(this.vizRef.current)\n\n    let vizScrollObserver = new IntersectionObserver(\n      (entries, observer) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            let index = Number(entry.target.dataset.index)\n            if (index > -1) {\n              if (!this.state.vizCreated) {\n                this.setState({\n                  vizCreated: true\n                }, () => {\n                  this.createViz(this.props.data)\n                  let resizeTimer\n                  window.addEventListener('resize', () => {\n                    clearTimeout(resizeTimer)\n                    resizeTimer = setTimeout(() => {\n                      select('#polar-plot .viz').remove()\n                      this.createViz(this.props.data)\n                      this.state.updateFunc(this.state.currentState, -1)\n                    }, 400)\n                  })\n                })\n              }\n              this.state.updateFunc(index, this.state.currentState)\n            } else if (this.state.vizCreated) {\n              this.state.updateFunc(index, this.state.currentState)\n            }\n          }\n        })\n      },\n      {\n        threshold: 0\n      }\n    )\n    document.querySelectorAll('#polar-plot .viz-scroll-anchor').forEach(el => {\n      vizScrollObserver.observe(el)\n    })\n  }\n  render() {\n    return (\n      <div id=\"polar-plot\" className=\"viz-outer-wrap\" ref={this.vizRef}>\n        <div className=\"viz-scroll-box\">\n          <div className=\"viz-scroll-anchor\" data-index=\"-1\"></div>\n          {this.props.content.map((_, index) => {\n            return (\n              <div className=\"viz-scroll-anchor\" data-index={index} key={index}></div>\n            )\n          })}\n          <div className=\"viz-scroll-dummy-anchor\"></div>\n        </div>\n        <div className=\"viz-wrap\">\n          <div className=\"viz-des-wrap\">\n            {this.props.content.map((chunk, index) => {\n              return (\n                <p className=\"viz-des-text\" key={index}>{chunk.des}</p>\n              )\n            })}\n          </div>\n          <div className=\"viz-svg-outer-wrap\">\n            <div className=\"viz-svg-wrap\"></div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default PolarPlot;\n","import React, { Component } from 'react';\nimport './Section.css';\n\nimport LineChart from './viz/LineChart';\nimport PolarPlot from './viz/PolarPlot';\n\nclass Section extends Component {\n  constructor(props) {\n    super(props)\n    this.renderSwitch = this.renderSwitch.bind(this)\n    this.sectionRef = React.createRef()\n  }\n  renderSwitch() {\n    switch (this.props.content.key) {\n      case 'line-chart':\n        return <LineChart data={this.props.data} content={this.props.content.vizContent} />\n      case 'polar-plot':\n        return <PolarPlot data={this.props.data} content={this.props.content.vizContent} />\n      default:\n        return null\n    }\n  }\n  componentDidMount() {\n    this.sectionRef.current.querySelectorAll('.animate').forEach(el => {\n      this.props.animationObserver.observe(el)\n    })\n  }\n  render() {\n    let text = this.props.content.text\n    return (\n      <div className=\"section-wrap\" ref={this.sectionRef} style={{height: this.props.content.height}}>\n        <div className=\"limit-box\">\n          <div className=\"header limited\">\n              {text.header[0] && <h2 className=\"header-line animate right\">{text.header[0]}</h2>}\n              {text.header[1] && <h2 className=\"header-line animate left\">{text.header[1]}</h2>}\n          </div>\n          {text.des.map((para, index) => {\n            return (\n              <p\n                key={index}\n                className=\"para limited animate blur\"\n                style={{\n                  '--animation-speed': '800ms',\n                  '--animation-delay': '440ms'\n              }}>\n                {para.map((segment, index) => {\n                  switch(segment.type) {\n                    case 'span':\n                      return <span key={index}>{segment.content}</span>\n                    case 'sub':\n                      return <sub key={index}>{segment.content}</sub>\n                    default:\n                      return null\n                  }\n                })}\n              </p>\n            )\n          })}\n        </div>\n        {this.renderSwitch()}\n      </div>\n    )\n  }\n}\n\nexport default Section;\n","import React, { Component } from 'react';\nimport './App.css';\nimport { csv, timeParse } from 'd3';\n\nimport Section from './components/section/Section';\n\nconst styles = {\n  background: '#FFFFFF',\n  invertedBackground: '#060608',\n  dark: '#222224',\n  invertedDark: '#F9F9FA',\n  normal: '#444445',\n  invertedNormal: '#CCCCCD',\n  light: '#888889',\n  line: '#E6E6E8',\n  theme: '#4BA824',\n  warm: '#EC5F13',\n  cool: '#AB13EC'\n},\nvizs = [\n  {\n    key: 'line-chart',\n    height: '500vh',\n    text: {\n      header: ['NOT SO', 'LINEAR.'],\n      des: [\n        [\n          {\n            type: 'span',\n            content: 'A simple line plot can show us how the CO'\n          },\n          {\n            type: 'sub',\n            content: '2'\n          },\n          {\n            type: 'span',\n            content: ' levels (measured in ppm - parts per million) have changed since the first recordings in 1958. Inference for regression was done with PyStan. A basic linear regression proved insufficient, and slightly more complex terms were added to improve model performance!'\n          }\n        ]\n      ]\n    },\n    vizContent: [\n      {\n        state: 'initial',\n        des: 'The original data looks like this.',\n        params: null\n      },\n      {\n        state: 'linear',\n        des: 'There is a clear and consistent upward trend through the years.',\n        params: [\n          306.06644452,\n          0.00430901514\n        ]\n      },\n      {\n        state: 'quadratic',\n        des: 'But a quadratic trend line would be a better fit.',\n        params: [\n          314.574751,\n          0.00210065413,\n          0.0000000973625567\n        ]\n      },\n      {\n        state: 'cosine',\n        des: 'The levels also have a seasonal component. This could be modeled by adding a cosine term to the function.',\n        params: [\n          314.569048,\n          0.00210632696,\n          0.0000000970576557,\n          2.86111474,\n          -0.554076698]\n      }\n    ]\n  },\n  {\n    key: 'polar-plot',\n    height: '400vh',\n    text: {\n      header: ['ROUND AND', 'ROUND WE GO.'],\n      des: [\n        [\n          {\n            type: 'span',\n            content: \"Say hi to polar plots! They're circular plots that use polar coordinate systems. This makes them highly appropriate for time series with recurring patterns. See them in action below!\"\n          }\n        ]\n      ]\n    },\n    vizContent: [\n      {\n        state: 'one',\n        des: 'Each revolution corresponds to a full year.',\n      },\n      {\n        state: 'all',\n        des: 'The whole dataset looks like this. Notice how the rise in CO2 levels is expressed by a consistent trend outward.'\n      },\n      {\n        state: 'stretches',\n        des: 'The revolutions are not perfectly circular. They stretch outward in winter months (blue) and inward in summer months (red). This is due to the annual seasonal fluctuations we saw above.'\n      }\n    ]\n  }\n],\nmainContent = {\n  meta: [\n    {\n      name: 'AUTHOR',\n      content: ['Vu Luong']\n    },\n    {\n      name: 'TOOLS/FRAMEWORKS',\n      content: ['PyStan', 'React', 'D3.js']\n    },\n    {\n      name: 'LINKS',\n      links: true,\n      content: [\n        {\n          name: 'Data Set',\n          link: 'https://www.esrl.noaa.gov/gmd/ccgg/trends/data.html'\n        },\n        {\n          name: 'Code for Stan Inference',\n          link: 'https://github.com/vuluongj20/misc/blob/master/CO2.ipynb'\n        },\n        {\n          name: 'Project Report',\n          link: 'data/Project Report.pdf'\n        }\n      ]\n    }\n  ],\n  endNote: \"That's all for now. Cheers :)\"\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n  componentDidMount() {\n    csv('data/weekly_in_situ_co2_mlo.csv').then(data => {\n      data.forEach(function(d) {\n        d.date = timeParse('%Y-%m-%d')(d.date)\n        d.level = +d.level\n      })\n      this.setState({\n        data: data,\n        animationObserver: new IntersectionObserver(\n          (entries, observer) => {\n            entries.forEach((entry) => {\n              if (entry.isIntersecting) {\n                entry.target.classList.add('on')\n              }\n            })\n          },\n          {\n            threshold: 0.5\n          }\n        )\n      }, () => {\n        document.querySelectorAll('.parent.animate').forEach(el => {\n          this.state.animationObserver.observe(el)\n        })\n      })\n    })\n  }\n  render() {\n    document.body.style.background = styles.invertedBackground\n    return (\n      <div\n        id=\"App\"\n        style={{\n            '--background': styles.background,\n            '--inverted-background': styles.invertedBackground,\n            '--dark': styles.dark,\n            '--inverted-dark': styles.invertedDark,\n            '--normal': styles.normal,\n            '--inverted-normal': styles.invertedNormal,\n            '--light': styles.light,\n            '--line': styles.line,\n            '--theme': styles.theme,\n            '--warm': styles.warm,\n            '--cool': styles.cool\n          }}>\n          <div className=\"hero-wrap\">\n            <h1 className=\"hero-text\">\n              <span className=\"hero-span span-1\">C</span>\n              <span className=\"hero-span span-2\">O</span>\n              <sub className=\"hero-span span-3\">2</sub>\n            </h1>\n            <p className=\"hero-des\">\n              An exploration into data visualization, with carbon dioxide records from the Mauna Loa Observatory in Hawaii.\n            </p>\n          </div>\n          <div className=\"meta-wrap\">\n            <div className=\"meta-inner-wrap limited\">\n              {mainContent.meta.map((column, index) => {\n                return (\n                  <div className=\"meta-column animate parent blur\" key={index}>\n                    <p className=\"meta-column-name\">{column.name}</p>\n                    {column.links ? (column.content.map((el, index) => {\n                      return <a className=\"meta-column-link\" key={index} href={el.link}>{el.name}</a>\n                    }))\n                    : (column.content.map((el, index) => {\n                      return <p className=\"meta-column-el\" key={index}>{el}</p>\n                    }))}\n                  </div>\n                )\n              })}\n            </div>\n          </div>\n          {this.state.data && vizs.map((viz, index) => {\n            return <Section key={index} data={this.state.data} content={viz} animationObserver={this.state.animationObserver}/>\n          })}\n          <div className=\"end-note-wrap\">\n            <p className=\"end-note animate parent blur\">{mainContent.endNote}</p>\n          </div>\n          <div className=\"footer-wrap\">\n            <p className=\"footer-name animate parent blur\">CO<sub>2</sub></p>\n            <p className=\"footer-text animate parent blur\">Made by Vu Luong, with ♥</p>\n          </div>\n      </div>\n    )\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}