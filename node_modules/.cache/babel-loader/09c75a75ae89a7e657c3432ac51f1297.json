{"ast":null,"code":"var _jsxFileName = \"/Users/vu/Documents/Work/Repositories/co2/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport * as d3 from 'd3';\nconst constants = {\n  alpha: 314.569302,\n  beta: 0.2\n};\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      originalData: [],\n      styles: {\n        dark: '#333344',\n        light: '#999999',\n        line: '#F1F1F1',\n        theme: '#F99806',\n        themeReadable: '#F99806'\n      },\n      chartState: 'initial'\n    };\n  }\n\n  updateChart(newState, svg, dataLine) {\n    switch (newState) {\n      case 'linear':\n        dataLine.transition().duration(600).ease(d3.easeQuad).attr('d', d3.line().x(function (d) {\n          return this.x(d.date) + margin.left;\n        }).y(function (d) {\n          return -0.6 * this.x(d.date) + 560 + margin.top;\n        }));\n    }\n  }\n\n  componentDidMount() {\n    let margin = {\n      top: 20,\n      right: 60,\n      bottom: 40,\n      left: 0\n    },\n        width = 800,\n        height = 600,\n        innerWidth = width - margin.left - margin.right,\n        innerHeight = height - margin.top - margin.bottom,\n        svg = d3.select('#App').append('svg').attr('width', width).attr('height', height);\n    d3.csv('data/weekly_in_situ_co2_mlo.csv').then(data => {\n      data.forEach(function (d) {\n        d.date = d3.timeParse('%Y-%m-%d')(d.date);\n        d.level = +d.level;\n      });\n      this.setState({\n        originalData: data\n      }, () => {\n        let x = d3.scaleTime().domain(d3.extent(data, (d, i) => {\n          return d.date;\n        })).range([0, innerWidth]).nice(),\n            y = d3.scaleLinear().domain(d3.extent(data, (d, i) => {\n          return d.level;\n        })).range([innerHeight, 0]).nice(),\n            totalLength = 0; // Grid lines\n\n        svg.append('g').attr('class', 'y grid').attr('transform', 'translate(' + margin.left + ', ' + height + ')').call(d3.axisBottom(x).ticks(5).tickSize(-height).tickFormat(''));\n        svg.append('g').attr('class', 'x grid').attr('transform', 'translate(' + margin.left + ', ' + margin.top + ')').call(d3.axisLeft(y).ticks(5).tickSize(-width).tickFormat('')); // Axes\n\n        svg.append('g').attr('class', 'x axis').attr('transform', 'translate(' + margin.left + ', ' + (innerHeight + margin.top) + ')').call(d3.axisBottom(x).ticks(5).tickSize(0).tickPadding(24));\n        svg.append('g').attr('class', 'y axis').attr('transform', 'translate(' + (innerWidth + margin.left) + ', ' + margin.top + ')').call(d3.axisRight(y).ticks(5).tickSize(0).tickPadding(32));\n        svg.append('line').attr('class', 'bottom-axis').attr(\"x1\", 0).attr(\"y1\", height - margin.bottom).attr(\"x2\", width).attr(\"y2\", height - margin.bottom); // Main data line\n\n        let dataLine = svg.append('path').datum(data).attr('class', 'data-line').attr('d', d3.line().x(function (d) {\n          return x(d.date) + margin.left;\n        }).y(function (d) {\n          return y(d.level) + margin.top;\n        }));\n        totalLength = dataLine.node().getTotalLength();\n        dataLine.attr(\"stroke-dasharray\", totalLength + \" \" + totalLength).attr(\"stroke-dashoffset\", totalLength).transition().delay(400).duration(600).ease(d3.easeCubicOut).attr('stroke-dashoffset', 0);\n        svg.node().addEventListener('click', () => {\n          this.updateChart('linear', svg, dataLine);\n        });\n      });\n    });\n  }\n\n  render() {\n    let styles = this.state.styles;\n    return React.createElement(\"div\", {\n      id: \"App\",\n      style: {\n        '--dark': styles.dark,\n        '--light': styles.light,\n        '--line': styles.line,\n        '--theme': styles.theme,\n        '--theme-readable': styles.themeReadable\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/vu/Documents/Work/Repositories/co2/src/App.js"],"names":["React","Component","d3","constants","alpha","beta","App","constructor","props","state","originalData","styles","dark","light","line","theme","themeReadable","chartState","updateChart","newState","svg","dataLine","transition","duration","ease","easeQuad","attr","x","d","date","margin","left","y","top","componentDidMount","right","bottom","width","height","innerWidth","innerHeight","select","append","csv","then","data","forEach","timeParse","level","setState","scaleTime","domain","extent","i","range","nice","scaleLinear","totalLength","call","axisBottom","ticks","tickSize","tickFormat","axisLeft","tickPadding","axisRight","datum","node","getTotalLength","delay","easeCubicOut","addEventListener","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport * as d3 from 'd3'\n\nconst constants = {\n  alpha: 314.569302,\n  beta: 0.2\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      originalData: [],\n      styles: {\n        dark: '#333344',\n        light: '#999999',\n        line: '#F1F1F1',\n        theme: '#F99806',\n        themeReadable: '#F99806'\n      },\n      chartState: 'initial'\n    }\n  }\n  updateChart(newState, svg, dataLine) {\n    switch(newState) {\n      case 'linear':\n        dataLine.transition()\n          .duration(600)\n          .ease(d3.easeQuad)\n          .attr('d', d3.line()\n            .x(function(d) { return this.x(d.date) + margin.left })\n            .y(function(d) { return -0.6*this.x(d.date) + 560 + margin.top })\n        )\n    }\n  }\n  componentDidMount() {\n    let margin = {top: 20, right: 60, bottom: 40, left: 0},\n      width = 800,\n      height = 600,\n      innerWidth = width - margin.left - margin.right,\n      innerHeight = height - margin.top - margin.bottom,\n      svg = d3.select('#App')\n      .append('svg')\n        .attr('width', width)\n        .attr('height', height)\n\n    d3.csv('data/weekly_in_situ_co2_mlo.csv').then(data => {\n      data.forEach(function(d) {\n        d.date = d3.timeParse('%Y-%m-%d')(d.date)\n        d.level = +d.level\n      })\n      this.setState({\n        originalData: data\n      }, () => {\n        let x = d3.scaleTime()\n          .domain(d3.extent(data, (d, i) => {return d.date}))\n          .range([0, innerWidth])\n          .nice(),\n          y = d3.scaleLinear()\n          .domain(d3.extent(data, (d, i) => {return d.level}))\n          .range([innerHeight, 0])\n          .nice(),\n          totalLength = 0\n\n        // Grid lines\n        svg.append('g')\n          .attr('class', 'y grid')\n          .attr('transform', 'translate(' + margin.left + ', ' + height + ')')\n          .call(d3.axisBottom(x)\n              .ticks(5)\n              .tickSize(-height)\n              .tickFormat('')\n          )\n        svg.append('g')\n          .attr('class', 'x grid')\n          .attr('transform', 'translate(' + margin.left + ', ' + margin.top + ')')\n          .call(d3.axisLeft(y)\n              .ticks(5)\n              .tickSize(-width)\n              .tickFormat('')\n          )\n\n        // Axes\n        svg.append('g')\n          .attr('class', 'x axis')\n          .attr('transform', 'translate(' + margin.left + ', ' + (innerHeight + margin.top) + ')')\n          .call(d3.axisBottom(x).ticks(5).tickSize(0).tickPadding(24))\n        svg.append('g')\n          .attr('class', 'y axis')\n          .attr('transform', 'translate(' + (innerWidth + margin.left) + ', ' + margin.top + ')')\n          .call(d3.axisRight(y).ticks(5).tickSize(0).tickPadding(32))\n        svg.append('line')\n          .attr('class', 'bottom-axis')\n          .attr(\"x1\", 0)\n          .attr(\"y1\", height - margin.bottom)\n          .attr(\"x2\", width)\n          .attr(\"y2\", height - margin.bottom)\n\n        // Main data line\n        let dataLine = svg.append('path')\n          .datum(data)\n          .attr('class', 'data-line')\n          .attr('d', d3.line()\n            .x(function(d) { return x(d.date) + margin.left })\n            .y(function(d) { return y(d.level) + margin.top })\n          )\n\n        totalLength = dataLine.node().getTotalLength()\n\n        dataLine.attr(\"stroke-dasharray\", totalLength + \" \" + totalLength)\n          .attr(\"stroke-dashoffset\", totalLength)\n          .transition()\n            .delay(400)\n            .duration(600)\n            .ease(d3.easeCubicOut)\n            .attr('stroke-dashoffset', 0)\n        svg.node().addEventListener('click', () => {\n          this.updateChart('linear', svg, dataLine)\n        })\n      })\n    })\n  }\n  render() {\n    let styles = this.state.styles\n    return (\n      <div\n        id=\"App\"\n        style={{\n            '--dark': styles.dark,\n            '--light': styles.light,\n            '--line': styles.line,\n            '--theme': styles.theme,\n            '--theme-readable': styles.themeReadable\n          }}>\n      </div>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}